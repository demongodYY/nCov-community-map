<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title></title>

    <style type="text/css">
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }

      #map {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <canvas id="canvas"></canvas>

    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=kTo3OjGPMfvTZg6ChjKZbpG6X0EunGrM"></script>
    <script src="http://mapv.baidu.com/build/mapv.min.js"></script>

    <script type="text/javascript">
      function searchLocation(names) {
        var myGeo = new BMap.Geocoder();
        const locations = names.map(
          name =>
            new Promise((resolve, reject) => {
              myGeo.getPoint(name, point => {
                resolve({name, loc: point});
              });
            })
        );
        return Promise.all(locations);
      }

      function drawMap(data) {
        const drawData = data.map(item => {
          return {
            geometry: {
              type: 'Point',
              coordinates: [item.loc.lng + Math.random() * 0.0001, item.loc.lat + Math.random() * 0.0001]
            },
            time: Math.random() * 10
          };
        });

        var dataSet = new mapv.DataSet(drawData);

        var options = {
          fillStyle: 'rgba(255, 250, 50, 1)',
          shadowColor: 'rgba(255, 250, 50, 0.5)',
          //shadowBlur: 3,
          size: 5,
          draw: 'simple'
          // animation: {
          //   type: 'time',
          //   stepsRange: {
          //     start: 0,
          //     end: 10
          //   },
          //   duration: 1
          // }
        };

        var mapvLayer = new mapv.baiduMapLayer(map, dataSet, options);
      }

      // 百度地图API功能
      var map = new BMap.Map('map', {
        enableMapClick: false
      }); // 创建Map实例
      var cityCenter1 = mapv.utilCityCenter.getCenterByCityName('成都市');
      map.centerAndZoom(new BMap.Point(cityCenter1.lng, cityCenter1.lat), 11); // 初始化地图,设置中心点坐标和地图级别
      map.enableScrollWheelZoom(false); // 开启鼠标滚轮缩放
      map.setMapStyle({
        style: 'midnight'
      });

      const testData = [
        ['成都市高新区招商玺悦', '未公布'],
        ['成都市高新区中海城南1号', '未公布'],
        ['成都市高新区中海九号公馆', '未公布'],
        ['成都市高新区时代天街', '未公布'],
        ['成都市高新区成达佳园', '未公布'],
        ['成都市高新区天府长城柏南郡', '未公布'],
        ['成都市高新区时代锦城酒店', '未公布'],
        ['成都市高新区中德英伦联邦', '未公布'],
        ['成都市高新区神仙树大院4期', '未公布'],
        ['成都市高新区蒂梵尼', '未公布'],
        ['成都市高新区景熙酒店', '未公布'],
        ['成都市高新区维也纳国际酒店', '未公布'],
        ['成都市高新区龙湖时代天街', '未公布'],
        ['成都市高新区乐观居', '未公布'],
        ['成都市高新区嘉好弗斯达酒店', '未公布'],
        ['成都市天府新区蜀郡', '未公布'],
        ['成都市天府新区青南美湾', '未公布'],
        ['成都市天府新区麓山国际圣芭芭拉', '未公布'],
        ['成都市双流区太禾水晶城', '未公布'],
        ['成都市双流区西南名族大学专家楼', '未公布'],
        ['成都市双流区西南民族大学专家楼', '未公布'],
        ['成都市双流区瞿上酒店', '未公布'],
        ['成都市锦江区望江锦园', '未公布'],
        ['成都市锦江区锦江城市花园三期', '未公布'],
        ['成都市锦江区时代豪庭', '未公布'],
        ['成都市锦江区熙宝酒店', '未公布'],
        ['成都市锦江区罗兰酒店', '未公布'],
        ['成都市锦江区华民逸园', '未公布'],
        ['成都市武侯区临江路8号院', '未公布'],
        ['成都市武侯区中粮祥云', '未公布'],
        ['成都市武侯区武侯国际花园', '未公布'],
        ['成都市武侯区中海常春藤花园', '未公布'],
        ['成都市成华区全季酒店', '未公布'],
        ['成都市成华区四季康成酒店', '未公布'],
        ['成都市成华区枫景雅居', '未公布'],
        ['成都市成华区高逸酒店', '未公布'],
        ['成都市成华区枫祥苑', '未公布'],
        ['成都市成华区香木林花园', '未公布'],
        ['成都市成华区八里阳光', '未公布'],
        ['成都市青羊区浣花香', '未公布'],
        ['成都市青羊区瑞景光华', '未公布'],
        ['成都市青羊区世纪金沙', '未公布'],
        ['成都市青羊区万科金色领域', '未公布'],
        ['成都市青羊区俊发时光俊园', '未公布'],
        ['成都市金牛区尚锦城', '未公布'],
        ['成都市金牛区懋园', '未公布'],
        ['成都市金牛区朝阳朗香广场', '未公布'],
        ['成都市金牛区天鑫花园', '未公布'],
        ['成都市金牛区金都苑', '未公布'],
        ['成都市金牛区檀香花园', '未公布'],
        ['成都市金牛区水韵天府', '未公布'],
        ['成都市金牛区龙湖源著', '未公布'],
        ['成都市温江区合能珍宝琥珀', '未公布'],
        ['成都市温江区丽晶公馆', '未公布'],
        ['成都市郫都区龙城国际4期', '未公布'],
        ['成都市郫都区绿地国际花都三期', '未公布'],
        ['成都市郫都区桃园柳岸', '未公布'],
        ['成都市郫都区花样年龙年国际', '未公布'],
        ['成都市郫都区逸树美家', '未公布'],
        ['成都市大邑县沙渠街道双河小区', '未公布'],
        ['成都市大邑县陶然居', '未公布'],
        ['成都市大邑县圣桦城', '未公布'],
        ['成都市青白江区攀成钢医院宿舍', '未公布'],
        ['成都市青白江区青江华庭', '未公布'],
        ['成都市青白江区川化一村', '未公布'],
        ['成都市青白江区天府欧城', '未公布'],
        ['成都市金堂县泰康尚境', '未公布'],
        ['成都市简阳市东方威尼斯', '未公布'],
        ['成都市邛崃市道佐乡竹韵山居', '未公布'],
        ['重庆市荣昌区怡和花苑', '1人'],
        ['重庆市荣昌区清升镇', '1人'],
        ['重庆市大足区茅店社区', '1人'],
        ['重庆市大足区金地阳光小区', '1人'],
        ['重庆市大足区新利村', '5人'],
        ['重庆市铜梁区龙都路400号', '1人'],
        ['重庆市铜梁区中南路55号', '1人'],
        ['重庆市铜梁区白龙花园', '1人'],
        ['重庆市铜梁区沙心村19组', '3人'],
        ['重庆市铜梁区长安街', '1人'],
        ['重庆市江津区半岛明珠', '1人'],
        ['重庆市九龙坡区华龙家园2期', '1人'],
        ['重庆市九龙坡区恒景天苑小区', '6人'],
        ['重庆市渝中区乡村基上清寺店', '4人'],
        ['重庆市梁平区柏树村3组', '1人'],
        ['重庆市梁平区新中街', '1人'],
        ['重庆市梁平区石马山南一段', '1人'],
        ['重庆市武隆区长坝镇', '1人'],
        ['重庆市万州区分水镇', '1人'],
        ['重庆市万州区响水镇', '1人'],
        ['重庆市万州区武陵镇', '2人'],
        ['重庆市万州区长坪乡', '1人'],
        ['重庆市万州区太白街道', '3人'],
        ['重庆市万州区双河口街道', '1人'],
        ['重庆市万州区周家坝街道', '4人'],
        ['重庆市万州区天城镇', '2人'],
        ['重庆市万州区高笋塘街道', '3人'],
        ['重庆市万州区钟鼓楼街道', '8人'],
        ['重庆市万州区牌楼街道', '3人'],
        ['重庆市万州区陈家坝街道', '4人'],
        ['重庆市万州区铁峰乡', '1人'],
        ['重庆市万州区熊家镇', '1人'],
        ['重庆市万州区百安坝街道', '2人'],
        ['重庆市万州区长滩镇', '1人'],
        ['重庆市开州区铁桥镇', '1人'],
        ['重庆市开州区岳溪镇', '1人'],
        ['重庆市开州区赵家街道', '3人'],
        ['重庆市开州区汉丰街道', '2人'],
        ['重庆市开州区文峰街道', '3人'],
        ['重庆市开州区丰乐街道', '2人'],
        ['重庆市开州区白鹤街道', '1人'],
        ['重庆市开州区厚坝镇', '2人'],
        ['重庆市石柱县万安街道', '1人'],
        ['重庆市石柱县南宾街道', '1人'],
        ['重庆市石柱县西沱镇', '8人'],
        ['重庆市云阳区高阳镇', '1人'],
        ['重庆市云阳区双江街道', '2人'],
        ['重庆市云阳区盘龙街道', '1人'],
        ['重庆市云阳区黄石镇', '1人'],
        ['重庆市云阳区水口镇', '1人'],
        ['重庆市云阳区农坝镇', '2人'],
        ['重庆市云阳区江口镇', '3人'],
        ['重庆市云阳区南溪镇', '2人'],
        ['重庆市云阳区宝坪镇', '1人'],
        ['重庆市云阳区青龙街道', '2人'],
        ['重庆市云阳区新津乡', '1人'],
        ['重庆市奉节县宝塔坪陈家包11栋', '2人'],
        ['重庆市奉节县广营村9组', '1人'],
        ['重庆市奉节县凤仙村4组', '1人'],
        ['重庆市奉节县飞洋世纪城', '3人'],
        ['重庆市奉节县金橙街58号', '1人'],
        ['重庆市巫溪县上磺', '1人'],
        ['重庆市巫溪县土城', '4人'],
        ['重庆市巫溪县文峰', '1人'],
        ['重庆市巫溪县宁河街道', '5人']
      ];

      searchLocation(testData.map(d => d[0])).then(drawMap);
    </script>
  </body>
</html>
